import './polyfills.server.mjs';
import{$ as Et,A as ht,B as gt,C as yt,J as bt,L as wt,M as me,N as vt,O as B,P as Mt,Q as Ct,R as kt,S as St,T as Nt,U as _t,X as Pt,a as lt,b as $e,c as ut,ca as It,d as ct,e as z,f as Y,g as Z,h as pt,i as dt,j as w,k as J,l as N,m as K,n as m,o as x,p as T,q as mt,r as xt,s as de,t as ee,u as _,v as h,w as Ae,x as te,y as V,z as Re}from"./chunk-EWM7NBPU.mjs";import{a as ce,b as pe}from"./chunk-KRLCULJA.mjs";function q(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Te(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xe(e){let t,n,r;e.length!==2?(t=q,n=(f,l)=>q(e(f),l),r=(f,l)=>e(f)-l):(t=e===q||e===Te?e:Mr,n=e,r=e);function i(f,l,s=0,c=f.length){if(s<c){if(t(l,l)!==0)return c;do{let u=s+c>>>1;n(f[u],l)<0?s=u+1:c=u}while(s<c)}return s}function a(f,l,s=0,c=f.length){if(s<c){if(t(l,l)!==0)return c;do{let u=s+c>>>1;n(f[u],l)<=0?s=u+1:c=u}while(s<c)}return s}function o(f,l,s=0,c=f.length){let u=i(f,l,s,c-1);return u>s&&r(f[u-1],l)>-r(f[u],l)?u-1:u}return{left:i,center:o,right:a}}function Mr(){return 0}function qe(e){return e===null?NaN:+e}var $t=xe(q),At=$t.right,Cr=$t.left,kr=xe(qe).center,Oe=At;var Sr=Math.sqrt(50),Nr=Math.sqrt(10),_r=Math.sqrt(2);function he(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Sr?10:a>=Nr?5:a>=_r?2:1,f,l,s;return i<0?(s=Math.pow(10,-i)/o,f=Math.round(e*s),l=Math.round(t*s),f/s<e&&++f,l/s>t&&--l,s=-s):(s=Math.pow(10,i)*o,f=Math.round(e/s),l=Math.round(t/s),f*s<e&&++f,l*s>t&&--l),l<f&&.5<=n&&n<2?he(e,t,n*2):[f,l,s]}function ge(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];let r=t<e,[i,a,o]=r?he(t,e,n):he(e,t,n);if(!(a>=i))return[];let f=a-i+1,l=new Array(f);if(r)if(o<0)for(let s=0;s<f;++s)l[s]=(a-s)/-o;else for(let s=0;s<f;++s)l[s]=(a-s)*o;else if(o<0)for(let s=0;s<f;++s)l[s]=(i+s)/-o;else for(let s=0;s<f;++s)l[s]=(i+s)*o;return l}function re(e,t,n){return t=+t,e=+e,n=+n,he(e,t,n)[2]}function He(e,t,n){t=+t,e=+e,n=+n;let r=t<e,i=r?re(t,e,n):re(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Rt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ye(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fe(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function oe(){}var ne=.7,ve=1/ne,G="\\s*([+-]?\\d+)\\s*",ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",C="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pr=/^#([0-9a-f]{3,8})$/,Er=new RegExp(`^rgb\\(${G},${G},${G}\\)$`),Ir=new RegExp(`^rgb\\(${C},${C},${C}\\)$`),$r=new RegExp(`^rgba\\(${G},${G},${G},${ie}\\)$`),Ar=new RegExp(`^rgba\\(${C},${C},${C},${ie}\\)$`),Rr=new RegExp(`^hsl\\(${ie},${C},${C}\\)$`),Tr=new RegExp(`^hsla\\(${ie},${C},${C},${ie}\\)$`),Tt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ye(oe,P,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qt,formatHex:qt,formatHex8:qr,formatHsl:Or,formatRgb:Ot,toString:Ot});function qt(){return this.rgb().formatHex()}function qr(){return this.rgb().formatHex8()}function Or(){return zt(this).formatHsl()}function Ot(){return this.rgb().formatRgb()}function P(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Pr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ht(t):n===3?new g(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?be(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?be(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Er.exec(e))?new g(t[1],t[2],t[3],1):(t=Ir.exec(e))?new g(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$r.exec(e))?be(t[1],t[2],t[3],t[4]):(t=Ar.exec(e))?be(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Rr.exec(e))?jt(t[1],t[2]/100,t[3]/100,1):(t=Tr.exec(e))?jt(t[1],t[2]/100,t[3]/100,t[4]):Tt.hasOwnProperty(e)?Ht(Tt[e]):e==="transparent"?new g(NaN,NaN,NaN,0):null}function Ht(e){return new g(e>>16&255,e>>8&255,e&255,1)}function be(e,t,n,r){return r<=0&&(e=t=n=NaN),new g(e,t,n,r)}function Hr(e){return e instanceof oe||(e=P(e)),e?(e=e.rgb(),new g(e.r,e.g,e.b,e.opacity)):new g}function Q(e,t,n,r){return arguments.length===1?Hr(e):new g(e,t,n,r??1)}function g(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ye(g,Q,Fe(oe,{brighter(e){return e=e==null?ve:Math.pow(ve,e),new g(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ne:Math.pow(ne,e),new g(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new g(H(this.r),H(this.g),H(this.b),Me(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ft,formatHex:Ft,formatHex8:Fr,formatRgb:Lt,toString:Lt}));function Ft(){return`#${O(this.r)}${O(this.g)}${O(this.b)}`}function Fr(){return`#${O(this.r)}${O(this.g)}${O(this.b)}${O((isNaN(this.opacity)?1:this.opacity)*255)}`}function Lt(){let e=Me(this.opacity);return`${e===1?"rgb(":"rgba("}${H(this.r)}, ${H(this.g)}, ${H(this.b)}${e===1?")":`, ${e})`}`}function Me(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function H(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function O(e){return e=H(e),(e<16?"0":"")+e.toString(16)}function jt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new v(e,t,n,r)}function zt(e){if(e instanceof v)return new v(e.h,e.s,e.l,e.opacity);if(e instanceof oe||(e=P(e)),!e)return new v;if(e instanceof v)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,f=a-i,l=(a+i)/2;return f?(t===a?o=(n-r)/f+(n<r)*6:n===a?o=(r-t)/f+2:o=(t-n)/f+4,f/=l<.5?a+i:2-a-i,o*=60):f=l>0&&l<1?0:o,new v(o,f,l,e.opacity)}function Vt(e,t,n,r){return arguments.length===1?zt(e):new v(e,t,n,r??1)}function v(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ye(v,Vt,Fe(oe,{brighter(e){return e=e==null?ve:Math.pow(ve,e),new v(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ne:Math.pow(ne,e),new v(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new g(Le(e>=240?e-240:e+120,i,r),Le(e,i,r),Le(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new v(Dt(this.h),we(this.s),we(this.l),Me(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=Me(this.opacity);return`${e===1?"hsl(":"hsla("}${Dt(this.h)}, ${we(this.s)*100}%, ${we(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Dt(e){return e=(e||0)%360,e<0?e+360:e}function we(e){return Math.max(0,Math.min(1,e||0))}function Le(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function je(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function Bt(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,f=r<t-1?e[r+2]:2*a-i;return je((n-r/t)*t,o,i,a,f)}}function Gt(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],f=e[(r+2)%t];return je((n-r/t)*t,i,a,o,f)}}var ae=e=>()=>e;function Lr(e,t){return function(n){return e+n*t}}function jr(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Qt(e){return(e=+e)==1?Ce:function(t,n){return n-t?jr(t,n,e):ae(isNaN(t)?n:t)}}function Ce(e,t){var n=t-e;return n?Lr(e,n):ae(isNaN(e)?t:e)}var De=function e(t){var n=Qt(t);function r(i,a){var o=n((i=Q(i)).r,(a=Q(a)).r),f=n(i.g,a.g),l=n(i.b,a.b),s=Ce(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=f(c),i.b=l(c),i.opacity=s(c),i+""}}return r.gamma=e,r}(1);function Ut(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,f;for(o=0;o<n;++o)f=Q(t[o]),r[o]=f.r||0,i[o]=f.g||0,a[o]=f.b||0;return r=e(r),i=e(i),a=e(a),f.opacity=1,function(l){return f.r=r(l),f.g=i(l),f.b=a(l),f+""}}}var Rn=Ut(Bt),Tn=Ut(Gt);function Wt(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Xt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Yt(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=F(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(f){for(o=0;o<r;++o)a[o]=i[o](f);return a}}function Zt(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function E(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Jt(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=F(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Ve=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ze=new RegExp(Ve.source,"g");function Dr(e){return function(){return e}}function zr(e){return function(t){return e(t)+""}}function Kt(e,t){var n=Ve.lastIndex=ze.lastIndex=0,r,i,a,o=-1,f=[],l=[];for(e=e+"",t=t+"";(r=Ve.exec(e))&&(i=ze.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),f[o]?f[o]+=a:f[++o]=a),(r=r[0])===(i=i[0])?f[o]?f[o]+=i:f[++o]=i:(f[++o]=null,l.push({i:o,x:E(r,i)})),n=ze.lastIndex;return n<t.length&&(a=t.slice(n),f[o]?f[o]+=a:f[++o]=a),f.length<2?l[0]?zr(l[0].x):Dr(t):(t=l.length,function(s){for(var c=0,u;c<t;++c)f[(u=l[c]).i]=u.x(s);return f.join("")})}function F(e,t){var n=typeof t,r;return t==null||n==="boolean"?ae(t):(n==="number"?E:n==="string"?(r=P(t))?(t=r,De):Kt:t instanceof P?De:t instanceof Date?Zt:Xt(t)?Wt:Array.isArray(t)?Yt:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Jt:E)(e,t)}function Be(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ge(e){return function(){return e}}function Qe(e){return+e}var er=[0,1];function U(e){return e}function Ue(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ge(isNaN(t)?NaN:.5)}function Vr(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Br(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Ue(i,r),a=n(o,a)):(r=Ue(r,i),a=n(a,o)),function(f){return a(r(f))}}function Gr(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Ue(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(f){var l=Oe(e,f,1,r)-1;return a[l](i[l](f))}}function tr(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Qr(){var e=er,t=er,n=F,r,i,a,o=U,f,l,s;function c(){var d=Math.min(e.length,t.length);return o!==U&&(o=Vr(e[0],e[d-1])),f=d>2?Gr:Br,l=s=null,u}function u(d){return d==null||isNaN(d=+d)?a:(l||(l=f(e.map(r),t,n)))(r(o(d)))}return u.invert=function(d){return o(i((s||(s=f(t,e.map(r),E)))(d)))},u.domain=function(d){return arguments.length?(e=Array.from(d,Qe),c()):e.slice()},u.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},u.rangeRound=function(d){return t=Array.from(d),n=Be,c()},u.clamp=function(d){return arguments.length?(o=d?!0:U,c()):o!==U},u.interpolate=function(d){return arguments.length?(n=d,c()):n},u.unknown=function(d){return arguments.length?(a=d,u):a},function(d,$){return r=d,i=$,c()}}function We(){return Qr()(U,U)}function rr(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function L(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function k(e){return e=L(Math.abs(e)),e?e[1]:NaN}function nr(e,t){return function(n,r){for(var i=n.length,a=[],o=0,f=e[0],l=0;i>0&&f>0&&(l+f+1>r&&(f=Math.max(1,r-l)),a.push(n.substring(i-=f,i+f)),!((l+=f+1)>r));)f=e[o=(o+1)%e.length];return a.reverse().join(t)}}function ir(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ur=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function I(e){if(!(t=Ur.exec(e)))throw new Error("invalid format: "+e);var t;return new ke({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}I.prototype=ke.prototype;function ke(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ke.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function or(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Xe;function ar(e,t){var n=L(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Xe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+L(e,Math.max(0,t+a-1))[0]}function Ye(e,t){var n=L(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var Ze={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:rr,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ye(e*100,t),r:Ye,s:ar,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Je(e){return e}var fr=Array.prototype.map,sr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function lr(e){var t=e.grouping===void 0||e.thousands===void 0?Je:nr(fr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Je:ir(fr.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function s(u){u=I(u);var d=u.fill,$=u.align,M=u.sign,W=u.symbol,j=u.zero,X=u.width,Ie=u.comma,A=u.precision,ot=u.trim,y=u.type;y==="n"?(Ie=!0,y="g"):Ze[y]||(A===void 0&&(A=12),ot=!0,y="g"),(j||d==="0"&&$==="=")&&(j=!0,d="0",$="=");var br=W==="$"?n:W==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",wr=W==="$"?r:/[%p]/.test(y)?o:"",at=Ze[y],vr=/[defgprs%]/.test(y);A=A===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function ft(p){var R=br,b=wr,D,st,se;if(y==="c")b=at(p)+b,p="";else{p=+p;var le=p<0||1/p<0;if(p=isNaN(p)?l:at(Math.abs(p),A),ot&&(p=or(p)),le&&+p==0&&M!=="+"&&(le=!1),R=(le?M==="("?M:f:M==="-"||M==="("?"":M)+R,b=(y==="s"?sr[8+Xe/3]:"")+b+(le&&M==="("?")":""),vr){for(D=-1,st=p.length;++D<st;)if(se=p.charCodeAt(D),48>se||se>57){b=(se===46?i+p.slice(D+1):p.slice(D))+b,p=p.slice(0,D);break}}}Ie&&!j&&(p=t(p,1/0));var ue=R.length+p.length+b.length,S=ue<X?new Array(X-ue+1).join(d):"";switch(Ie&&j&&(p=t(S+p,S.length?X-b.length:1/0),S=""),$){case"<":p=R+p+b+S;break;case"=":p=R+S+p+b;break;case"^":p=S.slice(0,ue=S.length>>1)+R+p+b+S.slice(ue);break;default:p=S+R+p+b;break}return a(p)}return ft.toString=function(){return u+""},ft}function c(u,d){var $=s((u=I(u),u.type="f",u)),M=Math.max(-8,Math.min(8,Math.floor(k(d)/3)))*3,W=Math.pow(10,-M),j=sr[8+M/3];return function(X){return $(W*X)+j}}return{format:s,formatPrefix:c}}var Se,Ne,_e;Ke({thousands:",",grouping:[3],currency:["$",""]});function Ke(e){return Se=lr(e),Ne=Se.format,_e=Se.formatPrefix,Se}function et(e){return Math.max(0,-k(Math.abs(e)))}function tt(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(k(t)/3)))*3-k(Math.abs(e)))}function rt(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,k(t)-k(e))+1}function nt(e,t,n,r){var i=He(e,t,n),a;switch(r=I(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=tt(i,o))&&(r.precision=a),_e(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=rt(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=et(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ne(r)}function Wr(e){var t=e.domain;return e.ticks=function(n){var r=t();return ge(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return nt(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],f=r[a],l,s,c=10;for(f<o&&(s=o,o=f,f=s,s=i,i=a,a=s);c-- >0;){if(s=re(o,f,n),s===l)return r[i]=o,r[a]=f,t(r);if(s>0)o=Math.floor(o/s)*s,f=Math.ceil(f/s)*s;else if(s<0)o=Math.ceil(o*s)/s,f=Math.floor(f*s)/s;else break;l=s}return e},e}function fe(){var e=We();return e.copy=function(){return tr(e,fe())},Rt.apply(e,arguments),Wr(e)}var Pe=class{constructor(){this.content=null,this.isPlaying=!1,this.currentTime=0}};var Ee=(()=>{let t=class t{constructor(){this.state=new lt(new Pe)}performAction(r,i,a){let o=this.state.value;switch(r){case"play":i&&this.state.next({content:i,isPlaying:!0,currentTime:0});break;case"pause":this.state.next(pe(ce({},o),{isPlaying:!1}));break;case"stop":this.state.next(pe(ce({},o),{isPlaying:!1,currentTime:0}));break;case"seek":typeof a=="number"&&this.state.next(pe(ce({},o),{currentTime:a}));break}}getState(){return this.state.asObservable()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Yr=["audioPlayer"];function Zr(e,t){if(e&1){let n=de();m(0,"div")(1,"audio",1,2),ee("timeupdate",function(i){Y(n);let a=_();return Z(a.onTimeUpdate(i))})("ended",function(){Y(n);let i=_();return Z(i.onAudioEnded())}),T(3,"source",3),h(4," Your browser does not support the audio element. "),x()()}if(e&2){let n=_();w(3),N("src",n.currentContent.link,dt)}}var cr=(()=>{let t=class t{constructor(r){this.playerService=r,this.currentContent=null,this.isPlaying=!1,this.currentTime=0}ngOnInit(){this.playerService.getState().subscribe(r=>{this.currentContent=r.content,this.isPlaying=r.isPlaying,this.currentTime=r.currentTime;let i=this.audioPlayerRef?.nativeElement;i&&(this.currentContent&&i.src!==this.currentContent.link&&(i.src=this.currentContent.link,i.load()),this.isPlaying&&i.paused?i.play():!this.isPlaying&&!i.paused&&i.pause(),Math.abs(i.currentTime-this.currentTime)>1&&(i.currentTime=this.currentTime))})}onTimeUpdate(r){let i=r.target;Math.abs(i.currentTime-this.currentTime)>1&&this.playerService.performAction("seek",void 0,i.currentTime)}onAudioEnded(){this.playerService.performAction("stop")}playContent(r){this.playerService.performAction("play",r)}};t.\u0275fac=function(i){return new(i||t)(J(Ee))},t.\u0275cmp=z({type:t,selectors:[["app-episode-player"]],viewQuery:function(i,a){if(i&1&&gt(Yr,5),i&2){let o;ht(o=yt())&&(a.audioPlayerRef=o.first)}},standalone:!0,features:[V],decls:2,vars:2,consts:[[4,"ngIf"],["controls","",3,"timeupdate","ended"],["audioPlayer",""],["type","audio/mpeg",3,"src"]],template:function(i,a){i&1&&(h(0),K(1,Zr,5,1,"div",0)),i&2&&(te("",a.currentContent==null?null:a.currentContent.title," "),w(1),N("ngIf",a.currentContent))},dependencies:[B,me],styles:["audio[_ngcontent-%COMP%]{width:100%}"]});let e=t;return e})();var dr=e=>({"background-color":e});function Jr(e,t){if(e&1&&(m(0,"div",12)(1,"div",13),h(2),x(),m(3,"div",14),h(4),x(),m(5,"div",15),h(6),x(),T(7,"div",16),x()),e&2){let n=_().$implicit,r=_();N("ngStyle",Re(5,dr,r.getColor(n))),w(2),Ae(n.titulo),w(2),te("Likes: ",n.likes,""),w(2),te("Descargas: ",n.descargas,""),w(1),N("innerHTML",r.tracklistWithBreaks(n.descripcion),pt)}}function Kr(e,t){if(e&1){let n=de();mt(0),m(1,"div",9),ee("click",function(){let a=Y(n).index,o=_();return Z(o.onEpisodeClick(a))}),m(2,"div",10),h(3),x()(),K(4,Jr,8,7,"div",11),xt()}if(e&2){let n=t.$implicit,r=t.index,i=_();w(1),N("ngStyle",Re(3,dr,i.getColor(n))),w(2),Ae(n.episodio),w(1),N("ngIf",i.selectedIndex===r)}}var pr="assets/db.json",mr=(()=>{let t=class t{constructor(r,i){this.httpClient=r,this.playerService=i,this.episodes=[],this.selectedIndex=null,this.sortBy="episodio",this.maxValues={},this.colorScale=fe().domain([0,50,100]).range(["red","yellow","green"])}ngOnInit(){this.httpClient.get(pr).pipe(ut(r=>{this.maxValues.likes=Math.max(...r.map(i=>parseInt(i.likes))),this.maxValues.descargas=Math.max(...r.map(i=>parseInt(i.descargas)))}),$e(r=>this.sortEpisodes(r,this.sortBy))).subscribe({next:r=>{this.episodes=r}})}getColor(r){let i=r[this.sortBy];if(!i)return"transparent";let a=this.sortBy==="likes"||this.sortBy==="descargas"?parseInt(i):0;if(isNaN(a))return"transparent";let o=this.maxValues[this.sortBy]||100,f=a/o*100;return this.colorScale(f)}onSortChange(r){this.sortBy=r.value,this.fetchEpisodes()}sortEpisodes(r,i){return r.sort((a,o)=>i==="likes"||i==="descargas"?parseInt(a[i])-parseInt(o[i]):i==="fecha"||i==="fechasubida"?a[i].localeCompare(o[i]):a[i]?.localeCompare(o[i]))}fetchEpisodes(){this.httpClient.get(pr).pipe($e(r=>this.sortEpisodes(r,this.sortBy))).subscribe(r=>{this.episodes=r})}onEpisodeClick(r){this.selectedIndex=this.selectedIndex===r?null:r;let i=this.episodes[r];this.playContent({title:i.titulo,link:i.link,id:i.episodio})}playContent(r){this.playerService.performAction("play",r)}tracklistWithBreaks(r){return r.replace(/\n/g,"<br>")}};t.\u0275fac=function(i){return new(i||t)(J(Mt),J(Ee))},t.\u0275cmp=z({type:t,selectors:[["app-episodes-grid"]],standalone:!0,features:[V],decls:16,vars:1,consts:[[1,"episode-grid"],["for","orderby"],["name","orderby","id","orderby",3,"change"],["value","likes"],["value","descargas"],["value","episodio"],["value","fecha"],["value","fechasubida"],[4,"ngFor","ngForOf"],[1,"episode-item",3,"ngStyle","click"],[1,"episodio"],["class","episode-detail-row",3,"ngStyle",4,"ngIf"],[1,"episode-detail-row",3,"ngStyle"],[1,"titulo"],[1,"likes"],[1,"descargas"],[1,"descripcion",3,"innerHTML"]],template:function(i,a){i&1&&(m(0,"div",0)(1,"div")(2,"label",1),h(3,"Ordenar:"),x(),m(4,"select",2),ee("change",function(f){return a.onSortChange(f.target)}),m(5,"option",3),h(6,"likes"),x(),m(7,"option",4),h(8,"descargas"),x(),m(9,"option",5),h(10,"episodio"),x(),m(11,"option",6),h(12,"fecha"),x(),m(13,"option",7),h(14,"fechasubida"),x()()(),K(15,Kr,5,5,"ng-container",8),x()),i&2&&(w(15),N("ngForOf",a.episodes))},dependencies:[B,wt,me,vt,St],styles:[".episode-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));grid-gap:5px}.episode-grid[_ngcontent-%COMP%]   .episode-item[_ngcontent-%COMP%]{display:grid;padding:0;width:auto;transition:all .3s ease;position:relative;z-index:1;cursor:pointer;height:85px;align-content:center}.episode-grid[_ngcontent-%COMP%]   .episode-item[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{white-space:nowrap}.episode-grid[_ngcontent-%COMP%]   .episode-item[_ngcontent-%COMP%]   .episodio[_ngcontent-%COMP%]{text-align:center}.episode-detail-row[_ngcontent-%COMP%]{grid-column:1/-1;transition:all .3s ease;padding:30px 15px}.episode-detail-row[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{font-size:2em;font-weight:600}"]});let e=t;return e})();var xr=(()=>{let t=class t{constructor(){this.title="cattaneoGridApp"}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=z({type:t,selectors:[["app-root"]],standalone:!0,features:[V],decls:8,vars:0,consts:[[1,"app-container"],[1,"episode-player"]],template:function(i,a){i&1&&(m(0,"div",0)(1,"header"),h(2," header "),x(),m(3,"content"),T(4,"router-outlet"),x(),m(5,"footer")(6,"div",1),T(7,"app-episode-player"),x()()())},dependencies:[B,Et,cr],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;max-height:-webkit-fill-available}.app-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{height:72px;display:none}.app-container[_ngcontent-%COMP%]   content[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}.app-container[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{height:auto}"]});let e=t;return e})();var hr=[{path:"**",component:mr}];var gr={providers:[It(hr),_t(),Ct(kt())]};var en={providers:[Pt()]},yr=bt(gr,en);var tn=()=>Nt(xr,yr),Vo=tn;export{Vo as a};
